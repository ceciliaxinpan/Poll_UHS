import React, { Component } from 'react';
import FBConfig from './Utils/FBConfig';

import PLConstance from './Utils/Constance';

import BarChart from './Components/BarChart';
import Poll from './Components/Poll';

const firebase = window.firebase;
class App extends Component {

  constructor(props) {
    super(props);

    this.state = {
      hasMadeChoice: false,
      pollData: {},
      pollResult: [],
      selectedChoice: {},
    }
  }

  componentDidMount() {
    firebase.initializeApp(FBConfig);
    this.createSeedPolls()
    this.getPollWith()
  }

  getPollWith(pollIdx = 0) {
    const pollRef = firebase.database().ref("polls");
    pollRef.once('value').then(function(snapshot){
      const polls = snapshot.val() || {};
      const pollKeys = Object.keys(polls);
      const targetPollKey = pollKeys[pollIdx];
      const pollData = polls[targetPollKey];
      pollData['id'] = targetPollKey;
      this.setState({pollData});

      this.getResultsWith(targetPollKey);

    }.bind(this));
  }

  getResultsWith(pollId) {
    const resultRef = firebase.database().ref("/results/" + pollId);
    resultRef.on('value', function(snapshot){
      const pollResult = snapshot.val() || [];
      this.setState({pollResult});
      console.log(pollResult);
    }.bind(this));
  }

  submitPoll(idx) {

    console.log(this.state.pollData);
    this.setState({hasMadeChoice: true});

    let newResult = [];
    let pollResult = this.state.pollResult;
    const pollData = this.state.pollData;
    const choices = pollData.choices;
    const pollId = pollData.id;
    const selectedChoice = choices[idx];

    if(pollResult.length > 0) {
      newResult = pollResult.map((data) => {
        if(data.choice === selectedChoice) {
          data.count += 1;
        }

        return data
      })
    }else {
      choices.forEach((choice) => {
        const count = (choice === selectedChoice) ? 1 : 0;
        const data = {choice, count};
        newResult.push(data);
      })
    }

    const resultRef = firebase.database().ref("/results/" + pollId);
    resultRef.set(newResult);
  }

  createSeedPolls() {
    const seed =
    {
      type: "radiogroup",
      title: "Which icon you like the most?",
      choices: ["Google Icon", "Swift Icon", "Android Icon", "Windows Icon"],
      imgURLs: ['data:image/png;base64,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',
                'data:image/jpeg;base64,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',
                'data:image/png;base64,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',
                'data:image/png;base64,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']
    };

    firebase.database().ref('polls').push(seed);
  }

  render() {

    const placeholders = PLConstance.placeholders;

    return (
      <div id={PLConstance.styles.ids.pollApp}>

        <h3>{this.state.hasMadeChoice ? placeholders.resultTitle : placeholders.nonResultTitle}</h3>

        <Poll 
        pollData={this.state.pollData}
        selectedChoice={this.state.selectedChoice}
        submitPoll={this.submitPoll.bind(this)}
        hidden={this.state.hasMadeChoice}
        />

        <BarChart
        data={this.state.pollResult}
        hidden={!this.state.hasMadeChoice}
        />

      </div>
    );
  }
}

export default App;
